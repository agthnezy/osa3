(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(16),a=t.n(r),o=t(3),i=t(4),u=t.n(i),d="/api/persons",s=function(){return u.a.get(d).then((function(e){return e.data}))},l=function(e){return u.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return u.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},j=t(0),f=function(e){var n=e.contacts,t=e.handleDelete;return Object(j.jsx)("div",{children:n.map((function(e){return Object(j.jsxs)("p",{children:[e.name," ",e.number,"  ",Object(j.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"Delete"})]},e.name)}))})},m=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:e.addName,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},O=function(e){var n=e.filterContacts;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{onChange:n})]})},p=function(e){var n=e.message,t=e.type;return null===n?null:"error"===t?(console.log("Error!"),Object(j.jsx)("div",{style:{color:"red",borderStyle:"solid",borderRadius:5,font:25,padding:5,margin:5},children:n})):Object(j.jsx)("div",{style:{color:"green",borderStyle:"solid",borderRadius:5,font:25,padding:5,margin:5},children:n})},v=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),i=Object(o.a)(a,2),u=i[0],d=i[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),g=x[0],w=x[1],C=Object(c.useState)(t),N=Object(o.a)(C,2),y=N[0],S=N[1],k=Object(c.useState)(null),D=Object(o.a)(k,2),E=D[0],P=D[1],U=Object(c.useState)(),A=Object(o.a)(U,2),J=A[0],R=A[1],B=function(){s().then((function(e){r(e),S(e),d(""),w("")})).catch((function(e){R("error"),P("Error: couldn't retrieve phonenbook",e)}))},I=function(e,n,t,c){if("success"===e)switch(R("success"),n){case"add":P("Added ".concat(t));break;case"update":P("Updated ".concat(t,"'s number"));break;case"delete":P("Deleted ".concat(t))}else t.length<3&&(R("error"),P("Person validation failed: ".concat(t," is shorter than the minimum allowed length (3)"))),c.length<8&&(R("error"),P("Person validation failed: ".concat(c," is shorter than the minimum allowed length (8).")));setTimeout((function(){P(null),R(null)}),5e3)};Object(c.useEffect)((function(){B()}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(p,{message:E,type:J}),Object(j.jsx)(O,{filterContacts:function(e){var n;n=e.target.value,S(t.filter((function(e){return e.name.toUpperCase().indexOf(n.toUpperCase())>-1})))}}),Object(j.jsx)("h2",{children:"Add a new contact"}),Object(j.jsx)(m,{addName:function(e){e.preventDefault();var n=t[t.length-1].id,c=t.find((function(e){return e.name===u}));void 0!==c?window.confirm("Contact ".concat(u," exists already,\n       replace the old number with a new one?"))&&h(c.id,{name:u,number:g,id:c.id}).then((function(){B(),d(""),w(""),I("success","update",u,g)})).catch((function(e){I("error","update",u,g),B()})):l({name:u,number:g,id:n+1}).then((function(e){var n=t.concat(e);r(n),S(n),d(""),w(""),I("success","add",u,g)})).catch((function(e){I("error","add",u,g),B()}))},newName:u,newNumber:g,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(j.jsx)("h2",{children:"Contacts"}),Object(j.jsx)(f,{contacts:y,handleDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&b(e).then((function(){s().then((function(e){var t=e;r(t),S(t),I("success","delete",n,null)}))})).catch((function(e){I("error","delete",n,null),B()}))}})]})};a.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.42ca15a4.chunk.js.map